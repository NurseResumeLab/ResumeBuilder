<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nurse Resume Lab — Resume Builder</title>

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  .preview { width: 842px; max-width: 100%; }
  .preview .section { margin-bottom: 12px; }
  .preview .muted { color: #6b7280; font-size: 13px; }
  /* DESIGN STYLES */
  .design-clean {
    font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
    background: white;
  }
  .design-clean .name {
    font-weight: 700;
  }
  .design-clean .title {
  }

  .design-modern {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f9ff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  }
  .design-modern .name {
    font-weight: 800;
    border-bottom: 3px solid currentColor;
    padding-bottom: 6px;
  }
  .design-modern .title {
    font-weight: 600;
    margin-bottom: 15px;
  }
  .design-modern .muted {
  }
  .design-modern .section {
    margin-bottom: 18px;
    border-left: 4px solid currentColor;
    padding-left: 12px;
  }

  .design-classic {
    font-family: Georgia, serif;
    background: #fffef8;
    padding: 20px;
    border: 1px solid #ccc;
  }
  .design-classic .name {
    font-weight: bold;
    font-style: italic;
  }
  .design-classic .title {
    font-weight: 600;
    margin-bottom: 12px;
  }
  .design-classic .muted {
    font-style: italic;
  }
  .design-classic .section {
    margin-bottom: 14px;
    border-bottom: 1px dotted #ccc;
    padding-bottom: 8px;
  }

  .remove-btn { background: #fee2e2; color: #b91c1c; padding: 4px 8px; border-radius: 6px; cursor: pointer; border: none; }
  .add-btn { background: #e6f9f0; color: #065f46; padding: 6px 10px; border-radius: 6px; cursor: pointer; border: none; }

  /* Tag styles */
  .tag-skills {
    background-color: #bfdbfe; color: #1e40af;
    display: inline-block; padding: 2px 6px; margin: 2px 4px 2px 0;
    border-radius: 6px; font-size: 0.75rem;
  }
  .tag-certs {
    background-color: #bbf7d0; color: #15803d;
    display: inline-block; padding: 2px 6px; margin: 2px 4px 2px 0;
    border-radius: 6px; font-size: 0.75rem;
  }
</style>
</head>
<body class="bg-gray-50 p-6">

<script>
  const password = "NURSELAB123"; // change to your password
  const userPass = prompt("Enter password to view this page:");
  if(userPass !== password) {
    document.body.innerHTML = "<h2>Access denied</h2>";
  }
</script>


<div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6">
  <!-- LEFT: Form -->
  <div class="p-4 bg-white rounded shadow overflow-auto max-h-screen">
    <h2 class="text-2xl font-semibold mb-3">Build your custom resume</h2>
    <p class="text-sm text-gray-600 mb-4">Fill fields — preview updates live. Add/remove entries as needed. When finished, download PDF.</p>

    <div class="space-y-3 max-w-md">
      <label class="block"><span class="text-sm font-medium">Full name</span>
        <input id="fullName" class="mt-1 block w-full border rounded p-2" placeholder="Jane Doe" />
      </label>

      <label class="block"><span class="text-sm font-medium">Professional title</span>
        <input id="title" class="mt-1 block w-full border rounded p-2" placeholder="Registered Nurse / Trauma Nurse" />
      </label>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <label class="block"><span class="text-sm font-medium">Email</span>
          <input id="email" type="email" class="mt-1 block w-full border rounded p-2" placeholder="you@example.com" />
        </label>
        <label class="block"><span class="text-sm font-medium">Phone</span>
          <input id="phone" class="mt-1 block w-full border rounded p-2" placeholder="(555) 555-5555" />
        </label>
      </div>

      <label class="block"><span class="text-sm font-medium">City / State</span>
        <input id="cityState" class="mt-1 block w-full border rounded p-2" placeholder="Miami, FL" />
      </label>

      <label class="block"><span class="text-sm font-medium">Professional summary</span>
        <textarea id="summary" rows="3" class="mt-1 block w-full border rounded p-2" placeholder="Brief overview of strengths & goals"></textarea>
      </label>

      <!-- Work Experience container -->
      <div>
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold">Work Experience</h3>
          <button id="addWorkBtn" type="button" class="add-btn">+ Add Work</button>
        </div>
        <div id="workList" class="space-y-3 mt-3"></div>
      </div>

      <!-- Education container -->
      <div>
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold">Education</h3>
          <button id="addEduBtn" type="button" class="add-btn">+ Add Education</button>
        </div>
        <div id="eduList" class="space-y-3 mt-3"></div>
      </div>

      <label class="block"><span class="text-sm font-medium">Skills (comma separated)</span>
        <input id="skills" class="mt-1 block w-full border rounded p-2" placeholder="ACLS, BLS, IV, Critical Care" />
      </label>

      <label class="block"><span class="text-sm font-medium">Certifications (comma separated)</span>
        <input id="certs" class="mt-1 block w-full border rounded p-2" placeholder="RN — State Board, BLS, ACLS" />
      </label>

      <!-- FONT FAMILY SELECTOR -->
      <label class="block"><span class="text-sm font-medium">Font Family</span>
        <select id="fontFamilySelector" class="mt-1 block w-full border rounded p-2">
          <option value="Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif" selected>Inter (default)</option>
          <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
          <option value="Georgia, serif">Georgia</option>
          <option value="'Courier New', Courier, monospace">Courier New (monospace)</option>
          <option value="Arial, sans-serif">Arial</option>
        </select>
      </label>

      <!-- FONT SIZE INPUTS -->
      <label class="block"><span class="text-sm font-medium">Font Size: Name (px)</span>
        <input id="fontSizeName" type="number" min="14" max="48" step="1" value="26" class="mt-1 block w-full border rounded p-2" />
      </label>
      <label class="block"><span class="text-sm font-medium">Font Size: Section Headers (px)</span>
        <input id="fontSizeHeaders" type="number" min="12" max="36" step="1" value="18" class="mt-1 block w-full border rounded p-2" />
      </label>
      <label class="block"><span class="text-sm font-medium">Font Size: Body Text (px)</span>
        <input id="fontSizeBody" type="number" min="10" max="24" step="1" value="16" class="mt-1 block w-full border rounded p-2" />
      </label>

      <!-- COLOR PICKERS -->
      <label class="block"><span class="text-sm font-medium">Color: Name</span>
        <input type="color" id="colorName" class="mt-1 w-16 h-8 p-0 border rounded" value="#0f172a" />
      </label>
      <label class="block"><span class="text-sm font-medium">Color: Title</span>
        <input type="color" id="colorTitle" class="mt-1 w-16 h-8 p-0 border rounded" value="#374151" />
      </label>
      <label class="block"><span class="text-sm font-medium">Color: Section Headers</span>
        <input type="color" id="colorHeaders" class="mt-1 w-16 h-8 p-0 border rounded" value="#1e40af" />
      </label>
      <label class="block"><span class="text-sm font-medium">Color: Body Text</span>
        <input type="color" id="colorBody" class="mt-1 w-16 h-8 p-0 border rounded" value="#1f2937" />
      </label>

      <!-- DESIGN SELECTOR -->
      <label class="block"><span class="text-sm font-medium">Select Resume Design</span>
        <select id="designSelector" class="mt-1 block w-full border rounded p-2">
          <option value="design-clean">Clean</option>
          <option value="design-modern">Modern</option>
          <option value="design-classic">Classic</option>
        </select>
      </label>

      <div class="flex gap-3 mt-3">
        <button id="downloadBtn" class="px-4 py-2 bg-blue-600 text-white rounded">Download PDF</button>
        <button id="printBtn" class="px-4 py-2 border rounded">Print</button>
      </div>
    </div>
  </div>

  <!-- RIGHT: Live Preview -->
  <div class="p-4 overflow-auto max-h-screen">
    <h3 class="text-lg font-semibold mb-3">Live preview</h3>
    <div id="resumePreview" class="bg-white p-6 rounded shadow preview design-clean" style="min-height:600px; font-family:Inter,sans-serif; font-size:16px; color:#1f2937;">
      <div class="flex justify-between items-start">
        <div>
          <div id="prevFullName" class="name" style="font-weight:700; font-size:26px; color:#0f172a;">Your Name</div>
          <div id="prevTitle" class="title muted" style="color:#374151; margin-bottom:10px;">Professional Title</div>
        </div>
        <div class="text-sm text-right muted" style="color:#6b7280; font-size:13px;">
          <div id="prevCityState"></div>
          <div id="prevEmail"></div>
          <div id="prevPhone"></div>
        </div>
      </div>

      <hr class="my-4">

      <section id="prevSummarySec" class="mb-4 hidden">
        <h4 class="font-semibold" style="font-size:18px; color:#1e40af;">Summary</h4>
        <div id="prevSummary" class="content" style="color:#1f2937; font-size:16px;"></div>
      </section>

      <section id="prevExperienceSec" class="mb-4 hidden">
        <h4 class="font-semibold" style="font-size:18px; color:#1e40af;">Work Experience</h4>
        <div id="prevExperience" class="content" style="color:#1f2937; font-size:16px;"></div>
      </section>

      <section id="prevEducationSec" class="mb-4 hidden">
        <h4 class="font-semibold" style="font-size:18px; color:#1e40af;">Education</h4>
        <div id="prevEducation" class="content" style="color:#1f2937; font-size:16px;"></div>
      </section>

      <section id="prevSkillsCertSec" class="mb-4 hidden" style="color:#1f2937; font-size:16px;">
        <div class="grid grid-cols-2 gap-4">
          <div id="skillsCol" class="hidden"><h4 class="font-semibold" style="font-size:18px; color:#1e40af;">Skills</h4><div id="prevSkills"></div></div>
          <div id="certsCol" class="hidden"><h4 class="font-semibold" style="font-size:18px; color:#1e40af;">Certifications</h4><div id="prevCertifications"></div></div>
        </div>
      </section>

      <div class="text-xs muted mt-6" style="color:#6b7280;">Generated by Nurse Resume Lab • <span id="year"></span></div>
    </div>
  </div>
</div>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

const workList = document.getElementById('workList');
const eduList = document.getElementById('eduList');

function escapeHtml(text) {
  if (!text) return '';
  return text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function createWorkItem(data = {}) {
  const wrapper = document.createElement('div');
  wrapper.className = 'p-3 border rounded bg-gray-50 relative';
  wrapper.innerHTML = `
    <div class="flex justify-between items-start gap-2">
      <div class="flex-1">
        <input data-field="title" placeholder="Job title" class="mb-2 block w-full p-2 border rounded" value="${escapeHtml(data.title||'')}" />
        <input data-field="employer" placeholder="Employer" class="mb-2 block w-full p-2 border rounded" value="${escapeHtml(data.employer||'')}" />
        <div class="grid grid-cols-2 gap-2">
          <input data-field="start" placeholder="Start (MM/YYYY)" class="p-2 border rounded" value="${escapeHtml(data.start||'')}" />
          <input data-field="end" placeholder="End (MM/YYYY or Present)" class="p-2 border rounded" value="${escapeHtml(data.end||'')}" />
        </div>
        <input data-field="cityState" placeholder="City, State" class="mt-2 block w-full p-2 border rounded" value="${escapeHtml(data.cityState||'')}" />
        <textarea data-field="description" rows="3" placeholder="Description / achievements" class="mt-2 block w-full p-2 border rounded">${escapeHtml(data.description||'')}</textarea>
      </div>
      <div class="ml-2 flex flex-col items-end">
        <button data-action="remove" class="remove-btn mb-2" type="button">Remove</button>
      </div>
    </div>
  `;
  wrapper.querySelector('[data-action="remove"]').addEventListener('click', () => {
    wrapper.remove();
    updatePreview();
  });
  wrapper.querySelectorAll('input,textarea').forEach(el => {
    el.addEventListener('input', updatePreview);
  });
  return wrapper;
}

function createEduItem(data = {}) {
  const wrapper = document.createElement('div');
  wrapper.className = 'p-3 border rounded bg-gray-50 relative';
  wrapper.innerHTML = `
    <div class="flex justify-between items-start gap-2">
      <div class="flex-1">
        <input data-field="degree" placeholder="Degree / Certification" class="mb-2 block w-full p-2 border rounded" value="${escapeHtml(data.degree||'')}" />
        <input data-field="institution" placeholder="Institution" class="mb-2 block w-full p-2 border rounded" value="${escapeHtml(data.institution||'')}" />
        <div class="grid grid-cols-2 gap-2">
          <input data-field="start" placeholder="Start (MM/YYYY)" class="p-2 border rounded" value="${escapeHtml(data.start||'')}" />
          <input data-field="end" placeholder="End (MM/YYYY)" class="p-2 border rounded" value="${escapeHtml(data.end||'')}" />
        </div>
        <input data-field="cityState" placeholder="City, State" class="mt-2 block w-full p-2 border rounded" value="${escapeHtml(data.cityState||'')}" />
        <textarea data-field="description" rows="2" placeholder="Description / honors" class="mt-2 block w-full p-2 border rounded">${escapeHtml(data.description||'')}</textarea>
      </div>
      <div class="ml-2 flex flex-col items-end">
        <button data-action="remove" class="remove-btn mb-2" type="button">Remove</button>
      </div>
    </div>
  `;
  wrapper.querySelector('[data-action="remove"]').addEventListener('click', () => {
    wrapper.remove();
    updatePreview();
  });
  wrapper.querySelectorAll('input,textarea').forEach(el => {
    el.addEventListener('input', updatePreview);
  });
  return wrapper;
}

document.getElementById('addWorkBtn').addEventListener('click', () => {
  workList.appendChild(createWorkItem());
  updatePreview();
});

document.getElementById('addEduBtn').addEventListener('click', () => {
  eduList.appendChild(createEduItem());
  updatePreview();
});

const preview = {
  previewRoot: document.getElementById('resumePreview'),
  fullName: document.getElementById('prevFullName'),
  title: document.getElementById('prevTitle'),
  email: document.getElementById('prevEmail'),
  phone: document.getElementById('prevPhone'),
  cityState: document.getElementById('prevCityState'),

  summarySec: document.getElementById('prevSummarySec'),
  summary: document.getElementById('prevSummary'),

  experienceSec: document.getElementById('prevExperienceSec'),
  experience: document.getElementById('prevExperience'),

  educationSec: document.getElementById('prevEducationSec'),
  education: document.getElementById('prevEducation'),

  skillsSec: document.getElementById('prevSkillsCertSec'),
  skillsCol: document.getElementById('skillsCol'),
  certsCol: document.getElementById('certsCol'),
  skills: document.getElementById('prevSkills'),
  certs: document.getElementById('prevCertifications'),
};

const resumeFormElements = {
  fullName: document.getElementById('fullName'),
  title: document.getElementById('title'),
  email: document.getElementById('email'),
  phone: document.getElementById('phone'),
  cityState: document.getElementById('cityState'),
  summary: document.getElementById('summary'),
  skills: document.getElementById('skills'),
  certs: document.getElementById('certs'),
  designSelect: document.getElementById('designSelector'),
  fontFamilySelector: document.getElementById('fontFamilySelector'),
  fontSizeName: document.getElementById('fontSizeName'),
  fontSizeHeaders: document.getElementById('fontSizeHeaders'),
  fontSizeBody: document.getElementById('fontSizeBody'),
  colorName: document.getElementById('colorName'),
  colorTitle: document.getElementById('colorTitle'),
  colorHeaders: document.getElementById('colorHeaders'),
  colorBody: document.getElementById('colorBody'),
  downloadBtn: document.getElementById('downloadBtn'),
  printBtn: document.getElementById('printBtn'),
};

function updatePreview() {
  // Name & Title text + colors + sizes
  preview.fullName.textContent = resumeFormElements.fullName.value.trim() || 'Your Name';
  preview.fullName.style.color = resumeFormElements.colorName.value;
  preview.fullName.style.fontSize = resumeFormElements.fontSizeName.value + 'px';

  preview.title.textContent = resumeFormElements.title.value.trim() || 'Professional Title';
  preview.title.style.color = resumeFormElements.colorTitle.value;
  preview.title.style.fontSize = (parseInt(resumeFormElements.fontSizeHeaders.value) - 4) + 'px'; // slightly smaller than headers

  // Contact fields text and visibility
  preview.email.textContent = resumeFormElements.email.value.trim();
  preview.phone.textContent = resumeFormElements.phone.value.trim();
  preview.cityState.textContent = resumeFormElements.cityState.value.trim();

  preview.email.style.display = preview.email.textContent ? 'block' : 'none';
  preview.phone.style.display = preview.phone.textContent ? 'block' : 'none';
  preview.cityState.style.display = preview.cityState.textContent ? 'block' : 'none';

  preview.email.style.color = resumeFormElements.colorBody.value;
  preview.phone.style.color = resumeFormElements.colorBody.value;
  preview.cityState.style.color = resumeFormElements.colorBody.value;
  preview.email.style.fontSize = resumeFormElements.fontSizeBody.value + 'px';
  preview.phone.style.fontSize = resumeFormElements.fontSizeBody.value + 'px';
  preview.cityState.style.fontSize = resumeFormElements.fontSizeBody.value + 'px';

  // Summary
  const summaryVal = resumeFormElements.summary.value.trim();
  if (summaryVal) {
    preview.summarySec.classList.remove('hidden');
    preview.summary.textContent = summaryVal;
    preview.summary.style.color = resumeFormElements.colorBody.value;
    preview.summary.style.fontSize = resumeFormElements.fontSizeBody.value + 'px';
    preview.summarySec.querySelector('h4').style.color = resumeFormElements.colorHeaders.value;
    preview.summarySec.querySelector('h4').style.fontSize = resumeFormElements.fontSizeHeaders.value + 'px';
  } else {
    preview.summarySec.classList.add('hidden');
  }

  // Work Experience
  const workNodes = Array.from(workList.children);
  if (workNodes.length > 0) {
    preview.experienceSec.classList.remove('hidden');
    preview.experience.innerHTML = '';
    preview.experienceSec.querySelector('h4').style.color = resumeFormElements.colorHeaders.value;
    preview.experienceSec.querySelector('h4').style.fontSize = resumeFormElements.fontSizeHeaders.value + 'px';

    workNodes.forEach(node => {
      const title = node.querySelector('input[data-field="title"]').value.trim();
      const employer = node.querySelector('input[data-field="employer"]').value.trim();
      const start = node.querySelector('input[data-field="start"]').value.trim();
      const end = node.querySelector('input[data-field="end"]').value.trim();
      const cityState = node.querySelector('input[data-field="cityState"]').value.trim();
      const desc = node.querySelector('textarea[data-field="description"]').value.trim();

      if (!title && !employer && !desc) return; // skip empty

      const jobDiv = document.createElement('div');
      jobDiv.className = 'section';

      let headerText = '';
      if (title) headerText += `<strong style="color:${resumeFormElements.colorTitle.value}; font-size:${resumeFormElements.fontSizeHeaders.value}px;">${escapeHtml(title)}</strong>`;
      if (employer) headerText += (title ? ', ' : '') + `<span style="color:${resumeFormElements.colorBody.value}; font-size:${resumeFormElements.fontSizeBody.value}px;">${escapeHtml(employer)}</span>`;
      if (start || end) headerText += ' (' + escapeHtml(start || '') + ' - ' + escapeHtml(end || '') + ')';
      if (cityState) headerText += ', ' + escapeHtml(cityState);

      jobDiv.innerHTML = `
        <div>${headerText}</div>
        ${desc ? `<div class="muted" style="margin-top:4px; color:${resumeFormElements.colorBody.value}; font-size:${resumeFormElements.fontSizeBody.value}px;">${escapeHtml(desc)}</div>` : ''}
      `;
      preview.experience.appendChild(jobDiv);
    });
  } else {
    preview.experienceSec.classList.add('hidden');
  }

  // Education
  const eduNodes = Array.from(eduList.children);
  if (eduNodes.length > 0) {
    preview.educationSec.classList.remove('hidden');
    preview.education.innerHTML = '';
    preview.educationSec.querySelector('h4').style.color = resumeFormElements.colorHeaders.value;
    preview.educationSec.querySelector('h4').style.fontSize = resumeFormElements.fontSizeHeaders.value + 'px';

    eduNodes.forEach(node => {
      const degree = node.querySelector('input[data-field="degree"]').value.trim();
      const institution = node.querySelector('input[data-field="institution"]').value.trim();
      const start = node.querySelector('input[data-field="start"]').value.trim();
      const end = node.querySelector('input[data-field="end"]').value.trim();
      const cityState = node.querySelector('input[data-field="cityState"]').value.trim();
      const desc = node.querySelector('textarea[data-field="description"]').value.trim();

      if (!degree && !institution) return;

      const eduDiv = document.createElement('div');
      eduDiv.className = 'section';

      let headerText = '';
      if (degree) headerText += `<strong style="color:${resumeFormElements.colorTitle.value}; font-size:${resumeFormElements.fontSizeHeaders.value}px;">${escapeHtml(degree)}</strong>`;
      if (institution) headerText += (degree ? ', ' : '') + `<span style="color:${resumeFormElements.colorBody.value}; font-size:${resumeFormElements.fontSizeBody.value}px;">${escapeHtml(institution)}</span>`;
      if (start || end) headerText += ' (' + escapeHtml(start || '') + ' - ' + escapeHtml(end || '') + ')';
      if (cityState) headerText += ', ' + escapeHtml(cityState);

      eduDiv.innerHTML = `
        <div>${headerText}</div>
        ${desc ? `<div class="muted" style="margin-top:4px; color:${resumeFormElements.colorBody.value}; font-size:${resumeFormElements.fontSizeBody.value}px;">${escapeHtml(desc)}</div>` : ''}
      `;
      preview.education.appendChild(eduDiv);
    });
  } else {
    preview.educationSec.classList.add('hidden');
  }

  // Skills & Certifications
  const skillsVal = resumeFormElements.skills.value.trim();
  const certsVal = resumeFormElements.certs.value.trim();

  if (skillsVal || certsVal) {
    preview.skillsSec.classList.remove('hidden');
    preview.skillsSec.querySelectorAll('h4').forEach(h => {
      h.style.color = resumeFormElements.colorHeaders.value;
      h.style.fontSize = resumeFormElements.fontSizeHeaders.value + 'px';
    });

    if (skillsVal) {
      preview.skillsCol.classList.remove('hidden');
      preview.skills.innerHTML = '';
      const skillsArr = skillsVal.split(',').map(s => s.trim()).filter(Boolean);
      skillsArr.forEach(s => {
        const span = document.createElement('span');
        span.textContent = s;
        span.className = 'tag-skills';
        preview.skills.appendChild(span);
      });
    } else {
      preview.skillsCol.classList.add('hidden');
      preview.skills.innerHTML = '';
    }

    if (certsVal) {
      preview.certsCol.classList.remove('hidden');
      preview.certs.innerHTML = '';
      const certsArr = certsVal.split(',').map(s => s.trim()).filter(Boolean);
      certsArr.forEach(c => {
        const span = document.createElement('span');
        span.textContent = c;
        span.className = 'tag-certs';
        preview.certs.appendChild(span);
      });
    } else {
      preview.certsCol.classList.add('hidden');
      preview.certs.innerHTML = '';
    }
  } else {
    preview.skillsSec.classList.add('hidden');
  }

  // Apply font family and design style class to preview root
  preview.previewRoot.style.fontFamily = resumeFormElements.fontFamilySelector.value;
  preview.previewRoot.className = 'bg-white p-6 rounded shadow preview ' + resumeFormElements.designSelect.value;

}

Object.values(resumeFormElements).forEach(el => {
  if (!el) return;
  if (['SELECT','INPUT','TEXTAREA'].includes(el.tagName)) {
    el.addEventListener('input', updatePreview);
    el.addEventListener('change', updatePreview);
  }
});

updatePreview();

// DOWNLOAD PDF
resumeFormElements.downloadBtn.addEventListener('click', async () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({
    unit: 'pt',
    format: 'a4'
  });

  // Clone preview, scale for PDF width ~595pt (A4)
  const clone = preview.previewRoot.cloneNode(true);
  clone.style.width = '595px';
  clone.style.fontFamily = preview.previewRoot.style.fontFamily;

  document.body.appendChild(clone);
  await new Promise(r => setTimeout(r, 200));

  const canvas = await html2canvas(clone, { scale: 2 });
  const imgData = canvas.toDataURL('image/png');

  doc.addImage(imgData, 'PNG', 20, 20, 555, (canvas.height * 555) / canvas.width);

  doc.save('nurse-resume.pdf');

  clone.remove();
});

// PRINT
resumeFormElements.printBtn.addEventListener('click', () => {
  const printWindow = window.open('', '_blank');
  printWindow.document.write('<html><head><title>Print Resume</title>');
  printWindow.document.write(`<style>body{margin:1cm; font-family:${preview.previewRoot.style.fontFamily}; color:${resumeFormElements.colorBody.value}; font-size:${resumeFormElements.fontSizeBody.value}px;} h4, .name, .title { color: ${resumeFormElements.colorHeaders.value} }</style>`);
  printWindow.document.write('</head><body>');
  printWindow.document.write(preview.previewRoot.innerHTML);
  printWindow.document.write('</body></html>');
  printWindow.document.close();
  printWindow.focus();
  printWindow.print();
  printWindow.close();
});
</script>

</body>
</html>
